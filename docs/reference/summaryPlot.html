<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Function to rapidly provide an overview of air quality data — summaryPlot • openair</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Function to rapidly provide an overview of air quality data — summaryPlot" />
<meta property="og:description" content="This function provides a quick graphical and numerical summary of
data. The location presence/absence of data are shown, with
summary statistics and plots of variable distributions.
summaryPlot can also provide summaries of a single
pollutant across many sites." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">openair</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.8-6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/davidcarslaw/openair">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Function to rapidly provide an overview of air quality data</h1>
    <small class="dont-index">Source: <a href='https://github.com/davidcarslaw/openair/blob/master/R/summaryPlot.R'><code>R/summaryPlot.R</code></a></small>
    <div class="hidden name"><code>summaryPlot.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function provides a quick graphical and numerical summary of
data. The location presence/absence of data are shown, with
summary statistics and plots of variable distributions.
<code>summaryPlot</code> can also provide summaries of a single
pollutant across many sites.</p>
    </div>

    <pre class="usage"><span class='fu'>summaryPlot</span><span class='op'>(</span>
  <span class='va'>mydata</span>,
  na.len <span class='op'>=</span> <span class='fl'>24</span>,
  clip <span class='op'>=</span> <span class='cn'>TRUE</span>,
  percentile <span class='op'>=</span> <span class='fl'>0.99</span>,
  type <span class='op'>=</span> <span class='st'>"histogram"</span>,
  pollutant <span class='op'>=</span> <span class='st'>"nox"</span>,
  period <span class='op'>=</span> <span class='st'>"years"</span>,
  avg.time <span class='op'>=</span> <span class='st'>"day"</span>,
  print.datacap <span class='op'>=</span> <span class='cn'>TRUE</span>,
  breaks <span class='op'>=</span> <span class='cn'>NULL</span>,
  plot.type <span class='op'>=</span> <span class='st'>"l"</span>,
  col.trend <span class='op'>=</span> <span class='st'>"darkgoldenrod2"</span>,
  col.data <span class='op'>=</span> <span class='st'>"lightblue"</span>,
  col.mis <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/grDevices/rgb.html'>rgb</a></span><span class='op'>(</span><span class='fl'>0.65</span>, <span class='fl'>0.04</span>, <span class='fl'>0.07</span><span class='op'>)</span>,
  col.hist <span class='op'>=</span> <span class='st'>"forestgreen"</span>,
  cols <span class='op'>=</span> <span class='cn'>NULL</span>,
  date.breaks <span class='op'>=</span> <span class='fl'>7</span>,
  auto.text <span class='op'>=</span> <span class='cn'>TRUE</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>mydata</th>
      <td><p>A data frame to be summarised. Must contain a
<code>date</code> field and at least one other parameter.</p></td>
    </tr>
    <tr>
      <th>na.len</th>
      <td><p>Missing data are only shown with at least
<code>na.len</code> <em>contiguous</em> missing vales. The purpose of
setting <code>na.len</code> is for clarity: with long time series it
is difficult to see where individual missing hours are.
Furthermore, setting <code>na.len = 96</code>, for example would show
where there are at least 4 days of continuous missing data.</p></td>
    </tr>
    <tr>
      <th>clip</th>
      <td><p>When data contain outliers, the histogram or density
plot can fail to show the distribution of the main body of data.
Setting <code>clip = TRUE</code>, will remove the top 1 <!-- % of data to -->
yield what is often a better display of the overall distribution
of the data. The amount of clipping can be set with
<code>percentile</code>.</p></td>
    </tr>
    <tr>
      <th>percentile</th>
      <td><p>This is used to clip the data. For example,
<code>percentile = 0.99</code> (the default) will remove the top 1
percentile of values i.e. values greater than the 99th
percentile will not be used.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p><code>type</code> is used to determine whether a histogram
(the default) or a density plot is used to show the distribution
of the data.</p></td>
    </tr>
    <tr>
      <th>pollutant</th>
      <td><p><code>pollutant</code> is used when there is a field
<code>site</code> and there is more than one site in the data frame.</p></td>
    </tr>
    <tr>
      <th>period</th>
      <td><p><code>period</code> is either <code>years</code> (the default)
or <code>months</code>. Statistics are calculated depending on the
<code>period</code> chosen.</p></td>
    </tr>
    <tr>
      <th>avg.time</th>
      <td><p>This defines the time period to average the time
series plots. Can be &#8220;sec&#8221;, &#8220;min&#8221;, &#8220;hour&#8221;,
&#8220;day&#8221; (the default), &#8220;week&#8221;, &#8220;month&#8221;,
&#8220;quarter&#8221; or &#8220;year&#8221;. For much increased
flexibility a number can precede these options followed by a
space. For example, a timeAverage of 2 months would be
<code>avg.time = "2 month"</code>.</p></td>
    </tr>
    <tr>
      <th>print.datacap</th>
      <td><p>Should the data capture % be shown for each period?</p></td>
    </tr>
    <tr>
      <th>breaks</th>
      <td><p>Number of histogram bins. Sometime useful but not
easy to set a single value for a range of very different
variables.</p></td>
    </tr>
    <tr>
      <th>plot.type</th>
      <td><p>The <code>lattice</code> plot type, which is a line
(<code>plot.type = "l"</code>) by default. Another useful option is
<code>plot.type = "h"</code>, which draws vertical lines.</p></td>
    </tr>
    <tr>
      <th>col.trend</th>
      <td><p>Colour to be used to show the monthly trend of
the data, shown as a shaded region. Type <code><a href='https://rdrr.io/r/grDevices/colors.html'>colors()</a></code> into R
to see the full range of colour names.</p></td>
    </tr>
    <tr>
      <th>col.data</th>
      <td><p>Colour to be used to show the <em>presence</em> of
data. Type <code><a href='https://rdrr.io/r/grDevices/colors.html'>colors()</a></code> into R to see the full range of
colour names.</p></td>
    </tr>
    <tr>
      <th>col.mis</th>
      <td><p>Colour to be used to show missing data.</p></td>
    </tr>
    <tr>
      <th>col.hist</th>
      <td><p>Colour for the histogram or density plot.</p></td>
    </tr>
    <tr>
      <th>cols</th>
      <td><p>Predefined colour scheme, currently only enabled for
<code>"greyscale"</code>.</p></td>
    </tr>
    <tr>
      <th>date.breaks</th>
      <td><p>Number of major x-axis intervals to use. The
function will try and choose a sensible number of dates/times as
well as formatting the date/time appropriately to the range
being considered.  This does not always work as desired
automatically. The user can therefore increase or decrease the
number of intervals by adjusting the value of <code>date.breaks</code>
up or down.</p></td>
    </tr>
    <tr>
      <th>auto.text</th>
      <td><p>Either <code>TRUE</code> (default) or <code>FALSE</code>. If
<code>TRUE</code> titles and axis labels will automatically try and
format pollutant names and units properly e.g.  by subscripting
the &#8216;2&#8217; in NO2.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Other graphical parameters. Commonly used examples
include the axis and title labelling options (such as
<code>xlab</code>, <code>ylab</code> and <code>main</code>), which are all passed
to the plot via <code>quickText</code> to handle routine formatting.
As <code>summaryPlot</code> has two components, the axis labels may be
a vector. For example, the default case (<code>type =
"histogram"</code>) sets y labels equivalent to <code>ylab = c("",
"Percent of Total")</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>summaryPlot</code> produces two panels of plots: one showing the
presence/absence of data and the other the distributions. The left
panel shows time series and codes the presence or absence of data
in different colours. By stacking the plots one on top of another
it is easy to compare different pollutants/variables. Overall
statistics are given for each variable: mean, maximum, minimum,
missing hours (also expressed as a percentage), median and the
95th percentile. For each year the data capture rate (expressed as
a percentage of hours in that year) is also given.</p>
<p>The right panel shows either a histogram or a density plot
depending on the choice of <code>type</code>. Density plots avoid the
issue of arbitrary bin sizes that can sometimes provide a
misleading view of the data distribution.  Density plots are often
more appropriate, but their effectiveness will depend on the data
in question.</p>
<p><code>summaryPlot</code> will only show data that are numeric or integer
type.  This is useful for checking that data have been imported
properly. For example, if for some reason a column representing
wind speed erroneosly had one or more fields with charcters in,
the whole column would be either character or factor type. The
absence of a wind speed variable in the <code>summaryPlot</code> plot
would therefore indicate a problem with the input data. In this
particular case, the user should go back to the source data and
remove the characters or remove them using R functions.</p>
<p>If there is a field <code>site</code>, which would generally mean there
is more than one site, <code>summaryPlot</code> will provide information
on a <em>single</em> pollutant across all sites, rather than provide
details on all pollutants at a <em>single</em> site. In this case
the user should also provide a name of a pollutant e.g.
<code>pollutant = "nox"</code>. If a pollutant is not provided the first
numeric field will automatically be chosen.</p>
<p><b>It is strongly recommended that the <code>summaryPlot</code>
function is applied to all new imported data sets to ensure the
data are imported as expected.</b></p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>David Carslaw</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># load example data from package</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>mydata</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># do not clip density plot data</span></span>
<span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='fu'>summaryPlot</span><span class='op'>(</span><span class='va'>mydata</span>, clip <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># exclude highest 5 % of data etc.</span></span>
<span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='fu'>summaryPlot</span><span class='op'>(</span><span class='va'>mydata</span>, percentile <span class='op'>=</span> <span class='fl'>0.95</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># show missing data where there are at least 96 contiguous missing</span></span>
<span class='r-in'><span class='co'># values (4 days)</span></span>
<span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='fu'>summaryPlot</span><span class='op'>(</span><span class='va'>mydata</span>, na.len <span class='op'>=</span> <span class='fl'>96</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># show data in green</span></span>
<span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='fu'>summaryPlot</span><span class='op'>(</span><span class='va'>mydata</span>, col.data <span class='op'>=</span> <span class='st'>"green"</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># show missing data in yellow</span></span>
<span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='fu'>summaryPlot</span><span class='op'>(</span><span class='va'>mydata</span>, col.mis <span class='op'>=</span> <span class='st'>"yellow"</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># show density plot line in black</span></span>
<span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='fu'>summaryPlot</span><span class='op'>(</span><span class='va'>mydata</span>, col.dens <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David Carslaw, Karl Ropkins.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


