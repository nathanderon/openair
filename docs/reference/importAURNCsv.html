<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>AURN csv file data import for openair — importAURNCsv • openair</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="AURN csv file data import for openair — importAURNCsv" />
<meta property="og:description" content="Function for importing common 1 hour average (hourly) UK Automatic Urban
and Rural Network (AURN) Air Quality Archive data files previously
downloaded in &quot;.csv&quot; format for use with the openair package.  The function
uses read.table (in utils) and rbind (in
reshape)." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">openair</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.8-6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/davidcarslaw/openair">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>AURN csv file data import for openair</h1>
    <small class="dont-index">Source: <a href='https://github.com/davidcarslaw/openair/blob/master/R/importAURNCsv.R'><code>R/importAURNCsv.R</code></a></small>
    <div class="hidden name"><code>importAURNCsv.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function for importing common 1 hour average (hourly) UK Automatic Urban
and Rural Network (AURN) Air Quality Archive data files previously
downloaded in ".csv" format for use with the openair package.  The function
uses <code>read.table</code> (in <code>utils</code>) and <code>rbind</code> (in
<code>reshape</code>).</p>
    </div>

    <pre class="usage"><span class='fu'>importAURNCsv</span><span class='op'>(</span>
  file <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/file.choose.html'>file.choose</a></span><span class='op'>(</span><span class='op'>)</span>,
  header.at <span class='op'>=</span> <span class='fl'>5</span>,
  data.at <span class='op'>=</span> <span class='fl'>7</span>,
  na.strings <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"No data"</span>, <span class='st'>""</span>, <span class='st'>"NA"</span><span class='op'>)</span>,
  date.name <span class='op'>=</span> <span class='st'>"Date"</span>,
  date.break <span class='op'>=</span> <span class='st'>"-"</span>,
  time.name <span class='op'>=</span> <span class='st'>"time"</span>,
  misc.info <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>4</span><span class='op'>)</span>,
  is.site <span class='op'>=</span> <span class='fl'>4</span>,
  bad.24 <span class='op'>=</span> <span class='cn'>TRUE</span>,
  correct.time <span class='op'>=</span> <span class='op'>-</span><span class='fl'>3600</span>,
  output <span class='op'>=</span> <span class='st'>"final"</span>,
  data.order <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"value"</span>, <span class='st'>"status"</span>, <span class='st'>"unit"</span><span class='op'>)</span>,
  simplify.names <span class='op'>=</span> <span class='cn'>TRUE</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>file</th>
      <td><p>The name of the AURN file to be imported. Default,
<code>file.choose</code> opens browser. Use of <code>read.table</code> (in
<code>utils</code>) also allows this to be a readable text-mode connection or
url (although these options are currently not fully tested).</p></td>
    </tr>
    <tr>
      <th>header.at</th>
      <td><p>The file row holding header information. This is used to
set names for the resulting imported data frame, but may be subject to
further modifications depending on following argument settings.</p></td>
    </tr>
    <tr>
      <th>data.at</th>
      <td><p>The first file row holding actual data. When generating the
data frame, the function will ignore all information before this row, and
attempt to include all data from this row onwards.</p></td>
    </tr>
    <tr>
      <th>na.strings</th>
      <td><p>Strings of any terms that are to be interpreted as NA
values within the file.</p></td>
    </tr>
    <tr>
      <th>date.name</th>
      <td><p>Header name of column holding date information. Combined
with time information as single date column in the generated data frame.</p></td>
    </tr>
    <tr>
      <th>date.break</th>
      <td><p>The break character separating days, months and years in
date information. For example, "-" in "01-01-2009".</p></td>
    </tr>
    <tr>
      <th>time.name</th>
      <td><p>Header name of column holding time information. Combined
with date information as single date column in the generated data frame.</p></td>
    </tr>
    <tr>
      <th>misc.info</th>
      <td><p>Row numbers of any additional information that may be
required from the original file. Each line retained as a character vector
in the generated data frame comment.</p></td>
    </tr>
    <tr>
      <th>is.site</th>
      <td><p>Header name of column holding site information. Setting to
NULL turns this option off.</p></td>
    </tr>
    <tr>
      <th>bad.24</th>
      <td><p>Reset AURN 24 time stamp. AURN time series are logged as
00:00:01 to 24:00:00 as opposed to the more conventional 00:00:00 to
23:59:59. <code>bad.24 = TRUE</code> resets the time stamp which is not allowed
in some time series classes or functions.</p></td>
    </tr>
    <tr>
      <th>correct.time</th>
      <td><p>Numerical correction (in seconds) for imported date.
AURN data is logged retrospectively. For 1 hour average data,
<code>correct.time = -3600</code> resets this to the start of the sampling
period.</p></td>
    </tr>
    <tr>
      <th>output</th>
      <td><p>Output style. Default "final" using <code><a href='import.html'>import()</a></code>.</p></td>
    </tr>
    <tr>
      <th>data.order</th>
      <td><p>A vector of names defining the order of data types. AURN
files typically include three data types, actual data and associated data
quality and measurement unit reports. Here, these are defined as "value",
"status" and "unit", respectively.</p></td>
    </tr>
    <tr>
      <th>simplify.names</th>
      <td><p>A logical (default TRUE) prompting the function to
try to simply data frame names using common chemical shorthand.  FALSE
retains names from original file, although these may be modified if they
contain unallowed characters or non-unique names.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Other parameters. Passed onto and handled by <code><a href='import.html'>import()</a></code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The function returns a data frame for use in openair. By comparison
  to the original file, the resulting data frame is modified as follows:
  Time and date information will combined in a single column "date",
  formatted as a conventional timeseries (<code><a href='https://rdrr.io/r/base/as.POSIXlt.html'>as.POSIXct</a></code>). Time
  adjustments may also be made, subject to "bad.24" and "correct.time"
  argument settings.  Using default settings, the argument
  <code>correct.time = - 3600</code> resets the time stamp to the start of the
  measurement period. If name simplification was requested
  (<code>simplify.names = TRUE</code>), common chemical names will be simplified.
  For example, "carbon monoxide" will be reset to "co". Currently, this
  option only applies to inorganics and particulates, not organics.
  Non-value information will be rationalised according to data.order. For
  example, for the default, <code>data.order = c("value", "status",
  "unit")</code>, the status and unit columns following the "co" column will be
  automatically renamed "unit.co" and "status.co", respectively.  An
  additional "site" column will be generated. Multiple "site" files are
  allowed.  Additional information (as defined in "misc.info") and data
  adjustments (as defined by "bad.24" and "correct.time") are retained in
  the data frame comment.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The importAURN() function was developed for use with air quality monitoring
site data files downloaded in standard hourly (or 1 hour average) format
using the Air Quality Archive email service. Argument defaults are set to
common values to simplify both the import operation and use with openair.</p>
<p>Similar file structures can also be imported using this function with
argument modification.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Generic import function <code><a href='import.html'>import</a></code>, or direct (on-line)
  data import function <code><a href='importAQE.html'>importAURN</a></code>. Other dedicated import
  functions available for other file types, e.g.: <code><a href='importKCL.html'>importKCL</a></code>,
  <code><a href='importADMS.html'>importADMS</a></code>, etc.</p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Karl Ropkins</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>##########</span></span>
<span class='r-in'><span class='co'>#example 1</span></span>
<span class='r-in'><span class='co'>##########</span></span>
<span class='r-in'><span class='co'>#data obtained from email service:</span></span>
<span class='r-in'><span class='co'>#http://www.airquality.co.uk/archive/data_selector.php</span></span>
<span class='r-in'><span class='co'>#or</span></span>
<span class='r-in'><span class='co'>#http://www.airquality.co.uk/archive/data_and_statistics.php?action=step_pre_1</span></span>
<span class='r-in'><span class='co'>#example file "AirQualityDataHourly.csv" Brighton Roadside and Brighton Preston Park 2008.</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#import data as mydata</span></span>
<span class='r-in'><span class='co'>## mydata &lt;- importAURN.csv("AirQualityDataHourly.csv")</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#read additional information retained by importAURN</span></span>
<span class='r-in'><span class='co'>## comment(mydata)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#analysis data by site</span></span>
<span class='r-in'><span class='co'>## boxplot(nox ~ site, data = mydata)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>##########</span></span>
<span class='r-in'><span class='co'>#example 2</span></span>
<span class='r-in'><span class='co'>##########</span></span>
<span class='r-in'><span class='co'>#example using data from url</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#import data as otherdata</span></span>
<span class='r-in'><span class='co'>## otherdata &lt;- importAURN.csv(</span></span>
<span class='r-in'><span class='co'>##  "http://www.airquality.co.uk/archive/data_files/site_data/HG1_2007.csv")</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#use openair function</span></span>
<span class='r-in'><span class='co'>## summarise(otherdata)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>##########</span></span>
<span class='r-in'><span class='co'>#example 3</span></span>
<span class='r-in'><span class='co'>##########</span></span>
<span class='r-in'><span class='co'>#example of importing other similar data formats</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#import 15 min average so2 data from Bexley using url</span></span>
<span class='r-in'><span class='co'>## so2.15min.data &lt;- importAURN.csv(</span></span>
<span class='r-in'><span class='co'>##  "http://www.airquality.co.uk/archive/data_files/15min_site_data/BEX_2008.csv",</span></span>
<span class='r-in'><span class='co'>##  correct.time = -900)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#note: correct.time amended for 15 min offset/correction.</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#additional comments</span></span>
<span class='r-in'><span class='co'>## comment(so2.15min.data)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#analysis</span></span>
<span class='r-in'><span class='co'>## diurnal.error(so2.15min.data, pollutant="so2")</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#wrapper for above operation</span></span>
<span class='r-in'><span class='co'>##(e.g. if you have to do this -or similar- a lot of time)</span></span>
<span class='r-in'><span class='co'>## my.import.wrapper &lt;- function(file, correct.time = -900, ...)</span></span>
<span class='r-in'><span class='co'>##  { importAURN.csv(file = file, correct.time = correct.time, ...) }</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#same as above</span></span>
<span class='r-in'><span class='co'>## so2.15min.data.again &lt;- my.import.wrapper(</span></span>
<span class='r-in'><span class='co'>##  "http://www.airquality.co.uk/archive/data_files/15min_site_data/BEX_2008.csv")</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#analysis</span></span>
<span class='r-in'><span class='co'>## timeVariation(so2.15min.data.again, pollutant="so2")</span></span>
<span class='r-in'></span>
<span class='r-in'></span>
<span class='r-in'></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David Carslaw, Karl Ropkins.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


