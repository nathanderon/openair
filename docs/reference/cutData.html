<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Function to split data in different ways for conditioning — cutData • openair</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Function to split data in different ways for conditioning — cutData" />
<meta property="og:description" content="Utility function to split data frames up in various ways for
conditioning plots. Users would generally not be expected to call
this function directly.  Widely used by many openair
functions usually through the option type." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">openair</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.8-6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/davidcarslaw/openair">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Function to split data in different ways for conditioning</h1>
    <small class="dont-index">Source: <a href='https://github.com/davidcarslaw/openair/blob/master/R/cutData.R'><code>R/cutData.R</code></a></small>
    <div class="hidden name"><code>cutData.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Utility function to split data frames up in various ways for
conditioning plots. Users would generally not be expected to call
this function directly.  Widely used by many <code>openair</code>
functions usually through the option <code>type</code>.</p>
    </div>

    <pre class="usage"><span class='fu'>cutData</span><span class='op'>(</span>
  <span class='va'>x</span>,
  type <span class='op'>=</span> <span class='st'>"default"</span>,
  hemisphere <span class='op'>=</span> <span class='st'>"northern"</span>,
  n.levels <span class='op'>=</span> <span class='fl'>4</span>,
  start.day <span class='op'>=</span> <span class='fl'>1</span>,
  is.axis <span class='op'>=</span> <span class='cn'>FALSE</span>,
  local.tz <span class='op'>=</span> <span class='cn'>NULL</span>,
  latitude <span class='op'>=</span> <span class='fl'>51</span>,
  longitude <span class='op'>=</span> <span class='op'>-</span><span class='fl'>0.5</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A data frame containing a field <code>date</code>.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>A string giving the way in which the data frame should
  be split. Pre-defined values are: &#8220;default&#8221;,
  &#8220;year&#8221;, &#8220;hour&#8221;, &#8220;month&#8221;, &#8220;season&#8221;,
  &#8220;weekday&#8221;, &#8220;site&#8221;, &#8220;weekend&#8221;,
  &#8220;monthyear&#8221;, &#8220;daylight&#8221;, &#8220;dst&#8221; (daylight
  saving time).</p>
<p><code>type</code> can also be the name of a numeric or factor. If a
  numeric column name is supplied <code>cutData</code> will split the
  data into four quantiles. Factors levels will be used to split
  the data without any adjustment.</p></td>
    </tr>
    <tr>
      <th>hemisphere</th>
      <td><p>Can be <code>"northern"</code> or <code>"southern"</code>,
used to split data into seasons.</p></td>
    </tr>
    <tr>
      <th>n.levels</th>
      <td><p>Number of quantiles to split numeric data into.</p></td>
    </tr>
    <tr>
      <th>start.day</th>
      <td><p>What day of the week should the <code>type =
"weekday"</code> start on?  The user can change the start day by
supplying an integer between 0 and 6. Sunday = 0, Monday = 1,
... For example to start the weekday plots on a Saturday,
choose <code>start.day = 6</code>.</p></td>
    </tr>
    <tr>
      <th>is.axis</th>
      <td><p>A logical (<code>TRUE</code>/<code>FALSE</code>), used to
request shortened cut labels for axes.</p></td>
    </tr>
    <tr>
      <th>local.tz</th>
      <td><p>Used for identifying whether a date has daylight
savings time (DST) applied or not. Examples include
<code>local.tz = "Europe/London"</code>, <code>local.tz =
"America/New_York"</code> i.e. time zones that assume DST.
<a href='https://en.wikipedia.org/wiki/List_of_zoneinfo_time_zones'>https://en.wikipedia.org/wiki/List_of_zoneinfo_time_zones</a>
shows time zones that should be valid for most systems. It is
important that the original data are in GMT (UTC) or a fixed
offset from GMT. See <code>import</code> and the openair manual for
information on how to import data and ensure no DST is applied.</p></td>
    </tr>
    <tr>
      <th>latitude</th>
      <td><p>The decimal latitude used in <code>type =
"daylight"</code>.</p></td>
    </tr>
    <tr>
      <th>longitude</th>
      <td><p>The decimal longitude. Note that locations west
of Greenwich are negative.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>All additional parameters are passed on to next
function(s).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns a data frame with a column <code>cond</code> that is
  defined by <code>type</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This section give a brief description of each of the define levels
of <code>type</code>. Note that all time dependent types require a
column <code>date</code>.</p>
<p>"default" does not split the data but will describe the levels as
a date range in the format "day month year".</p>
<p>"year" splits the data by each year.</p>
<p>"month" splits the data by month of the year.</p>
<p>"hour" splits the data by hour of the day.</p>
<p>"monthyear" splits the data by year and month. It differs from
month in that a level is defined for each month of the data set.
This is useful sometimes to show an ordered sequence of months if
the data set starts half way through a year; rather than starting
in January.</p>
<p>"weekend" splits the data by weekday and weekend.</p>
<p>"weekday" splits the data by day of the week - ordered to start
Monday.</p>
<p>"season" splits data up by season. In the northern hemisphere
winter = December, January, February; spring = March, April, May
etc. These defintions will change of <code>hemisphere =
"southern"</code>.</p>
<p>"seasonyear (or "yearseason") will split the data into year-season
intervals, keeping the months of a season together. For example,
December 2010 is considered as part of winter 2011 (with January
and February 2011). This makes it easier to consider contiguous
seasons. In contrast, <code>type = "season"</code> will just split the
data into four seasons regardless of the year.</p>
<p>"daylight" splits the data relative to estimated sunrise and
sunset to give either daylight or nighttime. The cut is made by
<code>cutDaylight</code> but more conveniently accessed via
<code>cutData</code>, e.g. <code>cutData(mydata, type = "daylight",
latitude = my.latitude, longitude = my.longitude)</code>. The daylight
estimation, which is valid for dates between 1901 and 2099, is
made using the measurement location, date, time and astronomical
algorithms to estimate the relative positions of the Sun and the
measurement location on the Earth's surface, and is based on NOAA
methods.
Measurement location should be
set using <code>latitude</code> (+ to North; - to South) and
<code>longitude</code> (+ to East; - to West).</p>
<p>"dst" will split the data by hours that are in daylight saving
time (DST) and hours that are not for appropriate time zones. The
option "dst" also requires that the local time zone is given
e.g. <code>local.tz = "Europe/London"</code>, <code>local.tz =
"America/New_York"</code>. Each of the two periods will be in
<em>local time</em>. The main purpose of this option is to test
whether there is a shift in the diurnal profile when DST and
non-DST hours are compared. This option is particularly useful
with the <code>timeVariation</code> function. For example, close to the
source of road vehicle emissions, `rush-hour' will tend to occur
at the same <em>local time</em> throughout the year e.g. 8 am and 5
pm. Therefore, comparing non-DST hours with DST hours will tend to
show similar diurnal patterns (at least in the timing of the
peaks, if not magnitude) when expressed in local time. By
contrast a variable such as wind speed or temperature should show
a clear shift when expressed in local time. In essence, this
option when used with <code>timeVariation</code> may help determine
whether the variation in a pollutant is driven by man-made
emissions or natural processes.</p>
<p>"wd" splits the data by 8 wind sectors and requires a column
<code>wd</code>: "NE", "E", "SE", "S", "SW", "W", "NW", "N".</p>
<p>"ws" splits the data by 8 quantiles of wind speed and requires a
column <code>ws</code>.</p>
<p>"site" splits the data by site and therefore requires a column
<code>site</code>.</p>
<p>Note that all the date-based types e.g. month/year are derived
from a column <code>date</code>. If a user already has a column with a
name of one of the date-based types it will not be used.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>David Carslaw (cutData) and Karl Ropkins (cutDaylight)</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'></span>
<span class='r-in'><span class='co'>## split data by day of the week</span></span>
<span class='r-in'><span class='va'>mydata</span> <span class='op'>&lt;-</span> <span class='fu'>cutData</span><span class='op'>(</span><span class='va'>mydata</span>, type <span class='op'>=</span> <span class='st'>"weekday"</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David Carslaw, Karl Ropkins.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


