<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Scale key handling for openair — drawOpenKey • openair</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Scale key handling for openair — drawOpenKey" />
<meta property="og:description" content="General function for producing scale keys for other openair functions.  The
function is a crude modification of the draw.colorkey function developed by
Deepayan Sarkar as part of the lattice package, and allows additional key
labelling to added, and provides some additional control of the appearance
and scaling." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">openair</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.8-6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/davidcarslaw/openair">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Scale key handling for openair</h1>
    <small class="dont-index">Source: <a href='https://github.com/davidcarslaw/openair/blob/master/R/drawOpenKey.R'><code>R/drawOpenKey.R</code></a></small>
    <div class="hidden name"><code>drawOpenKey.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>General function for producing scale keys for other openair functions.  The
function is a crude modification of the draw.colorkey function developed by
Deepayan Sarkar as part of the lattice package, and allows additional key
labelling to added, and provides some additional control of the appearance
and scaling.</p>
    </div>

    <pre class="usage"><span class='fu'>drawOpenKey</span><span class='op'>(</span><span class='va'>key</span>, draw <span class='op'>=</span> <span class='cn'>FALSE</span>, vp <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>key</th>
      <td><p>List defining the scale key structure to be produced. Most
  options are identical to original <code>draw.colorkey</code> function.</p>
<p>Original <code>draw.colorkey</code> options:</p>
<p><code>space</code> location of the scale key ("left", "right", "top" or
  "bottom").  Defaults to "right".</p>
<p><code>col</code> vector of colours, used in scale key.</p>
<p><code>at</code> numeric vector specifying where the colors change. Must be of
  length 1 more than the col vector.</p>
<p><code>labels</code> a character vector for labelling the at values, or more
  commonly, a list describing characteristics of the labels. This list may
  include components <code>labels</code>, <code>at</code>, <code>cex</code>, <code>col</code>,
  <code>rot</code>, <code>font</code>, <code>fontface</code> and <code>fontfamily</code>.</p>
<p><code>tick.number</code> approximate number of ticks.</p>
<p><code>width</code> width of the key.</p>
<p><code>height</code> height of key.</p>
<p>Note: <code>width</code> and <code>height</code> refer to the key dimensions.
  <code>height</code> is the length of the key along the plot axis it is
  positioned against, and <code>width</code> is the length perpendicular to that.</p>
<p>Additional options include:</p>
<p><code>header</code> a character vector of extra text to be added above the key,
  or a list describing some characteristics of the <code>header</code>. This list
  may include components <code>header</code>, the character vector of header
  labels, <code>tweaks</code>, a list of local controls, e.g. 'gap' and 'balance'
  for spacing relative to scale and footer, respectively, <code>auto.text</code>,
  <code>TRUE/FALSE</code> option to apply <code>quickText</code>, and <code>slot</code>, a
  numeric vector setting the size of the text boxes <code>header</code> text is
  placed in.</p>
<p><code>footer</code> as in <code>header</code> but for labels below the scale key.</p>
<p>Notes: <code>header</code> and <code>footer</code> formatting can not be set locally,
  but instead are matched to those set in <code>labels</code>. <code>drawOpenKey</code>
  allows for up to six additional labels (three above and three below scale
  key). Any additional text is ignored.</p>
<p><code>tweak, auto.text, slot</code> as in <code>header</code> and <code>footer</code> but
  sets all options uniformly. This also overwrites anything in
  <code>header</code> and/or <code>footer</code>.</p>
<p><code>fit</code> the fit method to be applied to the header, scale key and footer
  when placing the scale key left or right of the plot. Options include:
  'all', 'soft' and 'scale'.  The default 'all' fits header, key and footer
  into <code>height</code> range. The alternative 'scale' fits only the key
  within <code>height</code>. (This means that keys keep the same proportions
  relative to the main plot regardless of positioning but that header and
  footer may exceed plot dimensions if <code>height</code> and/or <code>slots</code>
  are too large.</p>
<p><code>plot.style</code> a character vector of key plotting style instructions:
  Options currently include: 'paddle', 'ticks' and 'border'. 'paddle'
  applies the incremental paddle layout used by <code>winRose</code>. 'ticks'
  places ticks between the labels scale key. 'border' places a border about
  the scale key. Any combination of these may be used but if none set,
  scale key defaults to <code>c("ticks", "border")</code> for most plotting
  operations or <code>c("paddle")</code> for <code>windRose</code>.</p></td>
    </tr>
    <tr>
      <th>draw</th>
      <td><p>Option to return the key object or plot it directly.  The
default, FALSE, should always be used within openair calls.</p></td>
    </tr>
    <tr>
      <th>vp</th>
      <td><p>View port to be used when plotting key. The default, NULL, should
  always be used within openair calls.</p>
<p>(Note: <code>drawOpenKey</code> is a crude modification of
  <code><a href='https://rdrr.io/pkg/lattice/man/draw.colorkey.html'>lattice::draw.colorkey</a></code>, that provides labelling options for
  <code>openair</code> plot scale keys. Some aspects of the function are in
  development and may to subject to change. Therefore, it is recommended
  that you use parent <code>openair</code> function controls, e.g.
  <code>key.position</code>, <code>key.header</code>, <code>key.footer</code> options, where
  possible.  <code>drawOpenKey</code> may obviously be used in other plots but it
  is recommended that <code>draw.colorkey</code> itself be used wherever this
  type of additional scale labelling is not required.)</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The function is a modification of <code><a href='https://rdrr.io/pkg/lattice/man/draw.colorkey.html'>lattice::draw.colorkey</a></code> and
  returns a scale key using a similar mechanism to that used in in the
  original function as developed by Deepayan Sarkar.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The <code>drawOpenKey</code> function produces scale keys for other openair
functions.</p>
<p>Most <code>drawOpenKey</code> options are identical to those of
<code><a href='https://rdrr.io/pkg/lattice/man/draw.colorkey.html'>lattice::draw.colorkey</a></code>.  For example, scale key size and position
are controlled via <code>height</code>, <code>width</code> and <code>space</code>. Likewise,
the axis labelling can be set in and formatted by <code>labels</code>. See
<code>draw.colorkey</code> for further details.</p>
<p>Additional scale labelling may be added above and below the scale using
<code>header</code> and <code>footer</code> options within <code>key</code>. As in other
<code>openair</code> functions, automatic text formatting can be enabled via
<code>auto.key</code>.</p>
<p>(Note: Currently, the formatting of <code>header</code> and <code>footer</code> text
are fixed to the same style as <code>labels</code> (the scale axis) and cannot be
defined locally.)</p>
<p>The relationship between <code>header</code>, <code>footer</code> and the scale key
itself can be controlled using <code>fit</code> options. These can be set in
<code>key$fit</code> to apply uniform control or individually in
<code>key$header$fit</code> and/or <code>key$footer$fit</code> to control locally.</p>
<p>The appearance of the scale can be controlled using <code>plot.style</code>.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>We gratefully acknoweldge the considerable help and advice of
  Deepayan Sarkar.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Deepayan Sarkar (2010). lattice: Lattice Graphics. R package
  version 0.18-5.  http://r-forge.r-project.org/projects/lattice/</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Functions using <code>drawOpenKey</code> currently include
  <code><a href='windRose.html'>windRose</a></code>, <code><a href='windRose.html'>pollutionRose</a></code>.</p>
<p>For details of the original function, see <code>draw.colorkey</code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p><code>draw.colorkey</code> is part of the <code>lattice</code> package,
  developed by Deepayan Sarkar.</p>
<p>Additional modifications by Karl Ropkins.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>##########</span></span>
<span class='r-in'><span class='co'>#example 1</span></span>
<span class='r-in'><span class='co'>##########</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#paddle style scale key used by windRose</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='fu'><a href='windRose.html'>windRose</a></span><span class='op'>(</span><span class='va'>mydata</span>,<span class='op'>)</span></span>
<span class='r-plt img'><img src='drawOpenKey-1.png' alt='' width='700' height='433' /></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#adding text and changing style and position via key</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#note:</span></span>
<span class='r-in'><span class='co'>#some simple key control also possible directly</span></span>
<span class='r-in'><span class='co'>#For example, below does same as</span></span>
<span class='r-in'><span class='co'>#windRose(mydata, key.position="right")</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='fu'><a href='windRose.html'>windRose</a></span><span class='op'>(</span><span class='va'>mydata</span>,</span>
<span class='r-in'>   key <span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>space<span class='op'>=</span><span class='st'>"right"</span><span class='op'>)</span></span>
<span class='r-in'><span class='op'>)</span></span>
<span class='r-plt img'><img src='drawOpenKey-2.png' alt='' width='700' height='433' /></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#however:</span></span>
<span class='r-in'><span class='co'>#more detailed control possible working with</span></span>
<span class='r-in'><span class='co'>#key and drawOpenKey. For example,</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='fu'><a href='windRose.html'>windRose</a></span><span class='op'>(</span><span class='va'>mydata</span>,</span>
<span class='r-in'>   key <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>header<span class='op'>=</span><span class='st'>"Title"</span>, footer<span class='op'>=</span><span class='st'>"wind speed"</span>,</span>
<span class='r-in'>              plot.style <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ticks"</span>, <span class='st'>"border"</span><span class='op'>)</span>,</span>
<span class='r-in'>              fit <span class='op'>=</span> <span class='st'>"all"</span>, height <span class='op'>=</span> <span class='fl'>1</span>,</span>
<span class='r-in'>              space <span class='op'>=</span> <span class='st'>"top"</span><span class='op'>)</span></span>
<span class='r-in'><span class='op'>)</span></span>
<span class='r-plt img'><img src='drawOpenKey-3.png' alt='' width='700' height='433' /></span>
<span class='r-in'></span>
<span class='r-in'></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David Carslaw, Karl Ropkins.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


