<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Air Quality England Network data import for openair — importAQE • openair</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Air Quality England Network data import for openair — importAQE" />
<meta property="og:description" content="Functions for importing hourly mean air pollution data from a range of UK
networks including the Automatic Urban and Rural Network. Files are imported
from a remote server operated by Ricardo that provides air quality data
files as R data objects." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">openair</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.8-6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/davidcarslaw/openair">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Air Quality England Network data import for openair</h1>
    <small class="dont-index">Source: <a href='https://github.com/davidcarslaw/openair/blob/master/R/importAQE.R'><code>R/importAQE.R</code></a>, <a href='https://github.com/davidcarslaw/openair/blob/master/R/importAURN.R'><code>R/importAURN.R</code></a>, <a href='https://github.com/davidcarslaw/openair/blob/master/R/importNI.R'><code>R/importNI.R</code></a>, and 2 more</small>
    <div class="hidden name"><code>importAURN.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Functions for importing hourly mean air pollution data from a range of UK
networks including the Automatic Urban and Rural Network. Files are imported
from a remote server operated by Ricardo that provides air quality data
files as R data objects.</p>
    </div>

    <pre class="usage"><span class='fu'>importAQE</span><span class='op'>(</span>
  site <span class='op'>=</span> <span class='st'>"yk13"</span>,
  year <span class='op'>=</span> <span class='fl'>2018</span>,
  pollutant <span class='op'>=</span> <span class='st'>"all"</span>,
  meta <span class='op'>=</span> <span class='cn'>FALSE</span>,
  ratified <span class='op'>=</span> <span class='cn'>FALSE</span>,
  to_narrow <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span>

<span class='fu'>importAURN</span><span class='op'>(</span>
  site <span class='op'>=</span> <span class='st'>"my1"</span>,
  year <span class='op'>=</span> <span class='fl'>2009</span>,
  data_type <span class='op'>=</span> <span class='st'>"hourly"</span>,
  pollutant <span class='op'>=</span> <span class='st'>"all"</span>,
  hc <span class='op'>=</span> <span class='cn'>FALSE</span>,
  meta <span class='op'>=</span> <span class='cn'>FALSE</span>,
  ratified <span class='op'>=</span> <span class='cn'>FALSE</span>,
  to_narrow <span class='op'>=</span> <span class='cn'>FALSE</span>,
  verbose <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span>

<span class='fu'>importNI</span><span class='op'>(</span>
  site <span class='op'>=</span> <span class='st'>"bel0"</span>,
  year <span class='op'>=</span> <span class='fl'>2018</span>,
  pollutant <span class='op'>=</span> <span class='st'>"all"</span>,
  meta <span class='op'>=</span> <span class='cn'>FALSE</span>,
  ratified <span class='op'>=</span> <span class='cn'>FALSE</span>,
  to_narrow <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span>

<span class='fu'>importSAQN</span><span class='op'>(</span>
  site <span class='op'>=</span> <span class='st'>"gla4"</span>,
  year <span class='op'>=</span> <span class='fl'>2009</span>,
  pollutant <span class='op'>=</span> <span class='st'>"all"</span>,
  meta <span class='op'>=</span> <span class='cn'>FALSE</span>,
  ratified <span class='op'>=</span> <span class='cn'>FALSE</span>,
  to_narrow <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span>

<span class='fu'>importWAQN</span><span class='op'>(</span>
  site <span class='op'>=</span> <span class='st'>"card"</span>,
  year <span class='op'>=</span> <span class='fl'>2018</span>,
  pollutant <span class='op'>=</span> <span class='st'>"all"</span>,
  meta <span class='op'>=</span> <span class='cn'>FALSE</span>,
  ratified <span class='op'>=</span> <span class='cn'>FALSE</span>,
  to_narrow <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>site</th>
      <td><p>Site code of the site to import e.g. &#8220;my1&#8221; is Marylebone
Road. Several sites can be imported with <code>site = c("my1", "nott")</code>
--- to import Marylebone Road and Nottingham for example.</p></td>
    </tr>
    <tr>
      <th>year</th>
      <td><p>Year or years to import. To import a sequence of years from 1990
to 2000 use <code>year = 1990:2000</code>. To import several specific years use
<code>year = c(1990, 1995, 2000)</code> for example.</p></td>
    </tr>
    <tr>
      <th>pollutant</th>
      <td><p>Pollutants to import. If omitted will import all pollutants
from a site. To import only NOx and NO2 for example use <code>pollutant =
c("nox", "no2")</code>.</p></td>
    </tr>
    <tr>
      <th>meta</th>
      <td><p>Should meta data be returned? If <code>TRUE</code> the site type,
latitude and longitude are returned.</p></td>
    </tr>
    <tr>
      <th>ratified</th>
      <td><p>If <code>TRUE</code> columns are returned indicating when each
species was ratified i.e. quality-checked.</p></td>
    </tr>
    <tr>
      <th>to_narrow</th>
      <td><p>By default the returned data has a column for each
pollutant/variable. When <code>to_narrow = TRUE</code> the data are stacked into
a narrow format with a column identifying the pollutant name.</p></td>
    </tr>
    <tr>
      <th>data_type</th>
      <td><p>For Data from the UK AURN, many different sources of data
  are available. These include:</p>  
<p></p><ul>
<li><p>"hourly" Default is to return hourly data.</p></li>
<li><p>"daily" Daily average data.</p></li>
<li><p>"monthly" Monthly average data with data capture information.</p></li>
<li><p>"annual" Annual average data with data capture information.</p></li>
<li><p>"15min" To import 15-minute average SO2 concentrations.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>hc</th>
      <td><p>A few sites have hydrocarbon measurements available and setting
<code>hc = TRUE</code> will ensure hydrocarbon data are imported. The default is
however not to as most users will not be interested in using hydrocarbon
data and the resulting data frames are considerably larger. This option is
only available for <code>importAURN</code>.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Should the function give messages when downloading files?
Default is <code>FALSE</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns a data frame of hourly mean values with date in POSIXct
  class and time zone GMT.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This family of functions has been written to make it easy to import data
from across several UK air quality networks. Ricardo have provided .RData
files (R workspaces) of all individual sites and years, as well as up to
date meta data. These files are updated on a daily basis. This approach
requires a link to the Internet to work.</p>
<p>For an up to date list of available sites that can be imported, see
<code><a href='importMeta.html'>importMeta</a></code>.</p>
<p>The site codes and pollutant names can be upper or lower case.</p>
<p>There are several advantages over the web portal approach where .csv files
are downloaded. First, it is quick to select a range of sites, pollutants
and periods (see examples below). Second, storing the data as .RData objects
is very efficient as they are about four times smaller than .csv files ---
which means the data downloads quickly and saves bandwidth. Third, the
function completely avoids any need for data manipulation or setting time
formats, time zones etc. The function also has the advantage that the proper
site name is imported and used in <code>openair</code> functions.</p>
<p>The data are imported by stacking sites on top of one another and will have
field names <code>site</code>, <code>code</code> (the site code) and <code>pollutant</code>.
Sometimes it is useful to have columns of site data. This can be done using
the <code>reshape</code> function --- see examples below.</p>
<p>All units are expressed in mass terms for gaseous species (ug/m3 for NO,
NO2, NOx (as NO2), SO2 and hydrocarbons; and mg/m3 for CO). PM10
concentrations are provided in gravimetric units of ug/m3 or scaled to be
comparable with these units. Over the years a variety of instruments have
been used to measure particulate matter and the technical issues of
measuring PM10 are complex. In recent years the measurements rely on FDMS
(Filter Dynamics Measurement System), which is able to measure the volatile
component of PM. In cases where the FDMS system is in use there will be a
separate volatile component recorded as 'v10' and non-volatile component
'nv10', which is already included in the absolute PM10 measurement. Prior to
the use of FDMS the measurements used TEOM (Tapered Element Oscillating.
Microbalance) and these concentrations have been multiplied by 1.3 to
provide an estimate of the total mass including the volatile fraction.</p>
<p>The function returns modelled hourly values of wind speed (<code>ws</code>), wind
direction (<code>wd</code>) and ambient temperature (<code>air_temp</code>) if available
(generally from around 2010). These values are modelled using the WRF model
operated by Ricardo.</p>
<p>The few BAM (Beta-Attenuation Monitor) instruments that have been
incorporated into the network throughout its history have been scaled by 1.3
if they have a heated inlet (to account for loss of volatile particles) and
0.83 if they do not have a heated inlet. The few TEOM instruments in the
network after 2008 have been scaled using VCM (Volatile Correction Model)
values to account for the loss of volatile particles. The object of all
these scaling processes is to provide a reasonable degree of comparison
between data sets and with the reference method and to produce a consistent
data record over the operational period of the network, however there may be
some discontinuity in the time series associated with instrument changes.</p>
<p>No corrections have been made to the PM2.5 data. The volatile component of
FDMS PM2.5 (where available) is shown in the 'v2.5' column.</p>
    <h2 class="hasAnchor" id="functions"><a class="anchor" href="#functions"></a>Functions</h2>

    
<ul>
<li><p><code>importAQE</code>: Import data from the Air Quality England</p></li>
<li><p><code>importNI</code>: Import data from the Northern Ireland Air Quality Network</p></li>
<li><p><code>importSAQN</code>: Import data from the Scottish Air Quality Network</p></li>
<li><p><code>importWAQN</code>: Import data from the Welsh Air Quality Network</p></li>
</ul>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='importKCL.html'>importKCL</a></code>, <code><a href='importADMS.html'>importADMS</a></code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>David Carslaw and Trevor Davies</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## import all pollutants from Marylebone Rd from 1990:2009</span></span>
<span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='va'>mary</span> <span class='op'>&lt;-</span> <span class='fu'>importAURN</span><span class='op'>(</span>site <span class='op'>=</span> <span class='st'>"my1"</span>, year <span class='op'>=</span> <span class='fl'>2000</span><span class='op'>:</span><span class='fl'>2009</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## import nox, no2, o3 from Marylebone Road and Nottingham Centre for 2000</span></span>
<span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='va'>thedata</span> <span class='op'>&lt;-</span> <span class='fu'>importAURN</span><span class='op'>(</span>site <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"my1"</span>, <span class='st'>"nott"</span><span class='op'>)</span>, year <span class='op'>=</span> <span class='fl'>2000</span>,</span>
<span class='r-in'>pollutant <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"nox"</span>, <span class='st'>"no2"</span>, <span class='st'>"o3"</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Other functions work in the same way e.g. to import Cardiff Centre data:</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='va'>cardiff</span> <span class='op'>&lt;-</span> <span class='fu'>importWAQN</span><span class='op'>(</span>site <span class='op'>=</span> <span class='st'>"card"</span>, year <span class='op'>=</span> <span class='fl'>2020</span><span class='op'>)</span></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David Carslaw, Karl Ropkins.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


